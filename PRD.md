# 影视播放平台

**个人影视播放平台，前端使用 react 框架，后端使用 trpc-go 框架。**

## 客户端

域名默认进入客户端页面。

首页按模块分为六部分；

- 顶栏
- 电影列表
- 下载榜
- 收藏榜
- 点赞榜
- 底部版权&备案

其中顶栏对应 header，底部版权&备案对用 footer，其他部分为 main。

### 顶栏

顶栏左上角为网站 logo；

中间为搜索框，用来模糊检索电影名称；

右边依次为管理入口 icon、用户名/退出/注册/登陆，逻辑为：
- 当用户未登录时，显示注册按钮和登陆按钮，不显示用户名
- 当用户登陆时，显示用户名和退出按钮，不显示登陆/注册
- 点击注册时，跳转到新的**注册弹框**，默认未注册时，所有人都为 guest 访客，注册的用户为 user 用户，手动在数据库里指定 admin 管理员
- 点击登录时，打开**登陆弹窗**
- 用户成功登陆后，显示用户名，用户名可点击，跳转到**用户详情页** -- p1
- 用户为管理员时，展示管理入口 icon

### 注册弹框

弹框内包含 3 个表单输入框：
- 第一行为用户名，限制输入中文、英文、数字，禁止其他字符输入，长度限制10个字符；
- 第二行为用户密码，校验最低为 4 位，最高为 32 位，限制字符为英文、数字、英文常用符号 ~!@#$%^&*()_+={}|<>,.?;:
- 第三行和第二行相同，后端需要校验第二行和第三行输入的内容是否完全一致；
- 密码输入时都使用密码展示符；

当用户点击**注册**按钮时，将用户名和密码写入到数据库中，关闭弹窗。

### 登陆弹窗

弹窗内包含 3 个表单输入框：
- 第一行为用户名，同注册页面；
- 第二行为用户密码，同注册页面；
- 第三行为验证码输入框，输入框后为验证码图片； -- p1

当用户点击**登陆**按钮时，后端比对数据库中的用户名和密码进行登录，登陆成功后，刷新页面。

### 用户详情页 -- p1

用户详情页显示顶栏，顶栏包含 logo、用户名、退出按钮；

页面只包含两个模块，顶栏和内容区域；

内容区域里为 2 个列表：
- 列表通过 menu 组件切换，菜单分别为收藏列表、点赞列表
- 列表支持分页，默认展示 20 行
- 列表展示字段分别为电影名、类型、豆瓣评分、导演、主演、制片国家/地区、语言、上映日期、收藏/点赞时间
- 列表按收藏/点赞时间倒序排序
- 每列后方有删除按钮，可以取消收藏/点赞
- 点击电影名可跳转到**电影详情页**

### 内容区域

电影列表展示在内容区域的左边，高度为整个 main 高度，宽度为 main 宽度的 2/3；

电影列表上方为筛选区域；
- 默认展示一行，为**类型**，单选选项为全部、喜剧、动作、爱情、科幻、魔幻、惊悚、战争、冒险、剧情、纪录片；
- 后方为重制按钮和查询按钮；
- 第一行下方为折叠/展开按钮；
- 展开后为**国家/地区**、**语言**、**上映日期**、**豆瓣评分**；
- 国家/地区单选选项为全部、中国大陆、港澳台、美国、日本、韩国、英国、德国、加拿大、俄国；
- 语言单选选项为全部、汉语、英语、韩语、日语、俄语；
- 上映日期单选选项为全部、2018、2019、2020、2021、2022；
- 豆瓣评分单选选项为全部、9分以上、8分以上、7分以上、6分以上；

电影列表展示的字段为：
- 电影海报图片
- 电影名
- 类型
- 豆瓣评分
- 导演
- 主演
- 制片国家/地区
- 语言
- 上映日期
- 播放量

列表支持分页，默认展示 20 行；

右上为播放榜，取下载最多的前 5 条展示；

右中为收藏榜，取收藏最多的前 5 条展示；

右中为点赞榜，取点赞最多的前 5 条展示；

### 电影详情页

电影详情页显示顶栏，顶栏包含 logo、用户名/退出/注册/登陆；

上方显示视频播放器，比例 16:9；

播放起左下方显示点赞和收藏按钮（一整行）；

获取登陆用户点赞和收藏状态进行展示，点击点赞和收藏时，更新相应数据；

未登录用户，点击点赞和收藏时，打开**注册弹框**；

下方显示海报、电影名、简介、日期等信息，参考
https://www.bilibili.com/bangumi/play/ss12548?theme=movie


### 底部版权&备案

纯样式，没啥好说的，但域名要备案，填写备案的信息。

## 管理端

点击管理入口 icon 进入到管理页面；

管理页显示顶栏，顶栏包含 logo、用户名、退出按钮；

管理页面分为 3 个管理入口：
- 电影添加
- 电影维护
- 属性配置 - p1

管理入口为左侧菜单栏。

### 电影添加

分为两步：

第一步 文件上传和url录入
- 支持文件上传
- 支持url链接输入

第二步 属性选择，所有信息必填
- 电影名输入，限制字符长度 20，字符任意
- 电影海报图片，图片上传组件，大小限制 10M
- 类型，下拉单选组件
- 豆瓣评分，输入框，限制输入 0 - 10 的一位小数
- 导演，输入框，限制字符长度 20，字符任意
- 主演，标签输入框，字符任意（字符串数组长度255）
- 制片国家/地区，下拉单选组件
- 语言，下拉单选组件
- 上映日期，下拉单选组件
- 简介，文本域，限制字符长度 1000，字符任意

第三步 确认 重置 按钮时
- 点击确认按钮时，弹出弹框，显示预览信息
- 点击重置按钮时，清空所有表单

### 电影维护

筛选表单：
- 电影名，输入框，限制 20 个任意字符
- 类型，多选下拉
- 国家/地区，多选下拉
- 语言，多选下拉
- 上映日期，多选下拉

电影表格展示的字段为：
- 电影海报图片
- 电影名
- 类型
- 豆瓣评分
- 导演
- 主演
- 制片国家/地区
- 语言
- 上映日期
- 操作

操作按钮：
- 上线/下线，改变电影的状态
- 编辑，打开属性配置弹框，表单同电影添加第二步
- 删除

### 属性配置

- 类型配置
- 制片国家/地区配置
- 语言配置
- 上映日期配置

各配置页面通过 menu 切换；

所有的配置页面都是表格 + 新增按钮；

点击新增打开弹框，弹框内有展示字段的输入框，点击确认时，校验输入的内容是否与已存在的数据重复；

表格不需要分页；

表格支持拖拽调整顺序；

表格展示字段：
- ID
- 类型 / 制片国家/地区 / 语言 / 上映日期
- 操作

操作按钮为： 编辑、删除
